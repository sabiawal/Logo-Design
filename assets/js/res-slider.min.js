(function(a){a.fn.resSlider=function(d){var f=a(this);var e=a(this).children("ul").first();var g=a("img",e).width();var c=a("img",e).width();var b={index:0,currentIndex:0,status:"play",timerWidth:0,iniAnimation:new Date().getTime(),stopAnimation:new Date().getTime(),htmlString:"",item:[],slideNext:function(){if(e.is(":animated")){return}if(b.status=="stop"){a(".timer",f).clearQueue();a(".timer",f).stop()}b.item.push(b.item[2]);b.item.splice(0,1);e.clearQueue();var h=b.index>0&&Math.abs(b.index-b.currentIndex)>1?80:d.duration;e.stop().animate({marginLeft:-(3*c)+"px"},h,function(){e.html(b.item.join(""));e.css("marginLeft",-(2*c)+"px");if(b.index>0&&parseInt(a("img",e.children("li").eq(2)).attr("data-index"))!=b.index){b.slideNext()}else{b.setActivePagination();b.index=0}b.lock=false});a(".timer",f).css({width:0,opacity:1,display:"block"})},slidePrev:function(){if(e.is(":animated")){return}if(b.status=="stop"){a(".timer",f).clearQueue();a(".timer",f).stop()}b.item.splice(0,0,b.item[b.item.length-3]);b.item.pop();e.clearQueue();var h=b.index>0&&Math.abs(b.index-b.currentIndex)>1?80:d.duration;e.stop().animate({marginLeft:-(c)+"px"},h,function(){e.html(b.item.join(""));e.css("marginLeft",-(2*c)+"px");if(b.index>0&&parseInt(a("img",e.children("li").eq(2)).attr("data-index"))!=b.index){b.slidePrev()}else{b.setActivePagination();b.index=0}});a(".timer",f).css({width:0,opacity:1,display:"block"})},slideFromPagination:function(i){if(d.stopOnCustomNavigation){b.status="stop";a("#loop-control").removeClass("pause");a("#loop-control").addClass("play")}b.status=b.status!="stop"?"pause":b.status;var h=parseInt(a("img",e.children("li").eq(2)).attr("data-index"));if(h==i){return}this.index=i;this.currentIndex=h;if(b.status!="stop"){a(".timer",f).stop().fadeOut("fast",function(){a(this).css({width:0}).show();if(h>i){b.slidePrev()}else{b.slideNext()}if(b.status!="stop"){b.status="play";b.loop()}})}else{if(h>i){b.slidePrev()}else{b.slideNext()}}b.iniAnimation=0;b.stopAnimation=0},setActivePagination:function(){a(".pagination li.active",f).removeClass("active");a(".pagination li[data-index='"+a("img",e.children("li").eq(2)).attr("data-index")+"']").addClass("active")},addPrevNextButton:function(){var h=a("<a href='javascript:void(0);' class='next'>Next</a>");var i=a("<a href='javascript:void(0);' class='prev'>Prev</a>");f.append(h);f.append(i);h.on("click",function(){if(e.is(":animated")){return false}if(d.stopOnCustomNavigation){b.status="stop";a("#loop-control").removeClass("pause");a("#loop-control").addClass("play")}b.status=b.status!="stop"?"pause":b.status;if(b.status!="stop"){a(".timer",f).clearQueue();a(".timer",f).stop().fadeOut("fast",function(){a(this).css({width:0,opacity:1}).show();b.slideNext();window.setTimeout(function(){b.status="play";b.loop()},d.duration)})}else{b.slideNext()}b.iniAnimation=0;b.stopAnimation=0});i.on("click",function(){if(d.stopOnCustomNavigation){b.status="stop";a("#loop-control").removeClass("pause");a("#loop-control").addClass("play")}b.status=b.status!="stop"?"pause":b.status;a(".timer",f).stop().fadeOut("fast",function(){a(this).css({width:0,opacity:1}).show();b.slidePrev();window.setTimeout(function(){if(b.status!="stop"){b.status="play";b.loop()}},d.duration)});b.iniAnimation=0;b.stopAnimation=0})},addPagination:function(){var h=a("<div class='pagination' />");var i=a("<ol />");h.append(i);a.each(a("img",e.children("li")),function(j,k){i.append("<li data-index='"+(j+1)+"'>"+(j+1)+"</li>");a(k).attr("data-index",(j+1))});i.children().eq(0).addClass("active");i.children().on("click",function(){b.slideFromPagination(parseInt(a(this).text()))});f.append(h)},addTimer:function(){var h=a("<div class='timer' />");a(".ctrl-wrap",f).append(h);b.timerWidth=h.width();h.css({width:0})},addPlayButton:function(){var h=a("<div id='loop-control' class='"+(d.loop?"pause":"play")+"' />");a(".ctrl-wrap",f).append(h);h.on("click",function(){a(".timer",f).show();if(a(this).hasClass("play")){a(this).removeClass("play");a(this).addClass("pause");b.status="playFromPause";b.loop()}else{a(this).removeClass("pause");a(this).addClass("play");b.status="stop";a(".timer",f).clearQueue();a(".timer",f).stop();e.clearQueue();e.stop(true,true);b.stopAnimation=new Date().getTime()}})},loop:function(){if(b.status=="playFromPause"){var h=d.loopInterval-(b.stopAnimation-b.iniAnimation);if(h>0){a(".timer",f).animate({width:b.timerWidth},h,function(){a(this).fadeOut("fast",function(){a(this).css({width:0,opacity:1});b.slideNext();setTimeout(b.loop,d.duration+10)});b.status="play"});b.iniAnimation=new Date().getTime()}else{b.status="play";b.loop()}}else{a(".timer",f).stop(true,true).animate({width:b.timerWidth},d.loopInterval,function(){a(this).fadeOut("fast",function(){a(this).css({width:0,opacity:1}).show();b.slideNext();setTimeout(b.loop,d.duration+10)})});b.iniAnimation=new Date().getTime()}},makeResizable:function(){a(window).on("resize",function(i){var h=a(this).width();if(h<=g){if(f.css("overflow")!="hidden"){f.css({overflow:"hidden"})}a("img",e).css({width:h});e.css({marginLeft:-(2*h)+"px"});c=h}else{a("img",e).css({width:g});e.css({marginLeft:-(2*g)+"px"});f.css({overflow:"visible"});c=g}b.addToCache();e.css({width:(c*e.children("li").length+1)+"px"})})},staticResize:function(){var h=a(window).width();if(h<=g){a("img",e).css({width:h});e.css({marginLeft:-(2*h)+"px"});c=h}else{a("img",e).css({width:g});e.css({marginLeft:-(2*g)+"px"});c=g}e.css({width:(c*e.children("li").length+1)+"px"})},addOverlay:function(){var h="<div class='left-overlay' />";h+="<div class='right-overlay' />";f.append(h)},positionOverlay:function(){var i=a(".left-overlay",f);var j=a(".right-overlay",f);var h=a("img",e).first().height();var k=e.position();i.css({position:"absolute",top:k.top,left:-c,width:c,height:h});i.on("click",function(){a(".prev",f).click()});j.css({position:"absolute",top:k.top,left:c,width:c,height:h});j.on("click",function(){a(".next",f).click()})},addToCache:function(){b.item=[];b.htmlString=e.html();e.children().each(function(){b.item.push(a("<ul />").append(a(this).clone()).html())})},bindOtherEvent:function(){f.on("mouseover",function(){if(e.is(":animated")){return}b.status="stop";a(".timer",f).clearQueue();a(".timer",f).stop();e.clearQueue();e.stop(true,true);b.stopAnimation=new Date().getTime()}).on("mouseout",function(){if(a("#loop-control").hasClass("pause")&&b.status=="stop"){b.status="playFromPause";b.loop()}})},init:function(){e.css({position:"relative"});b.addPrevNextButton();b.addPagination();b.addOverlay();b.positionOverlay();f.append("<div class='ctrl-wrap' />");b.addTimer();b.addPlayButton();e.prepend(e.children("li").last().prev().andSelf().clone());e.css("marginLeft",-(2*c)+"px");b.staticResize();b.makeResizable();b.bindOtherEvent();b.addToCache();if(d.loop){b.loop()}}};b.init()}})(jQuery);